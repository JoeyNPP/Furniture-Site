{"ast":null,"code":"import axios from \"axios\";\nimport { updateProduct } from \"./api\"; // ✅ Ensures last_sent tracking works\n\nconst API_URL = \"https://api.kit.com/v4/broadcasts\";\nconst API_KEY = \"kit_a0a183e8fd744ca557d96126e488ae22\";\nconst headers = {\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  \"X-Kit-Api-Key\": API_KEY\n};\n\n/**\r\n * POST /products/{product_id}/track-last-sent\r\n */\nasync function trackLastSent(productId) {\n  try {\n    const response = await fetch(`http://127.0.0.1:8000/products/${productId}/track-last-sent/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP Error ${response.status}`);\n    }\n    const data = await response.json();\n    console.log(\"✅ last_sent updated in DB:\", data);\n    return data;\n  } catch (error) {\n    console.error(\"Error updating last_sent via trackLastSent:\", error);\n  }\n}\n\n/**\r\n * ✅ Send Individual Emails & Then Track last_sent\r\n */\nexport async function sendIndividualEmails(selectedProducts) {\n  if (!selectedProducts || selectedProducts.length === 0) {\n    console.error(\"No products selected for individual email.\");\n    return;\n  }\n  for (const product of selectedProducts) {\n    if (!product || !product.title) {\n      console.error(\"Skipping invalid product:\", product);\n      continue;\n    }\n\n    // ✅ Standardize lead time format\n    let leadTime = product.lead_time || \"\";\n    if (leadTime.includes(\"Days\")) {\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\n    }\n\n    // ✅ Format price to 2 decimal places\n    let price = product.price || \"0\";\n    try {\n      price = parseFloat(price).toFixed(2);\n    } catch {\n      // Leave as is\n    }\n\n    // ✅ Build the email body (exact match to Python)\n    const emailBody = buildPythonStyleEmail({\n      subject: product.title || \"\",\n      amazonUrl: product.amazon_url || \"\",\n      walmartUrl: product.walmart_url || \"\",\n      ebayUrl: product.ebay_url || \"\",\n      imageUrl: product.image_url || \"\",\n      price,\n      moq: product.moq || \"0\",\n      qty: product.qty || \"0\",\n      asin: product.asin || \"\",\n      fob: product.fob || \"\",\n      expDate: product.exp_date || \"\",\n      leadTime\n    });\n    const emailData = {\n      subject: (product.title || \"\").trim(),\n      content: emailBody,\n      public: false,\n      // Draft mode\n      email_template_id: null\n    };\n    try {\n      const response = await axios.post(API_URL, emailData, {\n        headers\n      });\n      if (response.status === 201) {\n        console.log(`✅ Email draft successfully created for: ${product.title}`);\n        if (product.id) {\n          try {\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\n            await updateLastSent(product.id);\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\n          } catch (err) {\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\n          }\n        } else {\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\n        }\n      } else {\n        console.error(`❌ Failed to send email for ${product.title}:`, response.data);\n      }\n    } catch (error) {\n      console.error(`Error sending email for ${product.title}:`, error);\n    }\n  }\n}\n\n/**\r\n * ✅ Send Group Email & Update Last Sent for All Products\r\n */\nexport async function sendGroupEmail(selectedProducts) {\n  if (!selectedProducts || selectedProducts.length === 0) {\n    console.error(\"No products selected for group email.\");\n    return;\n  }\n  let combinedHTML = \"\";\n  for (const product of selectedProducts) {\n    if (!product || !product.title) {\n      console.error(\"Skipping invalid product in group:\", product);\n      continue;\n    }\n    let leadTime = product.lead_time || \"\";\n    if (leadTime.includes(\"Days\")) {\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\n    }\n    let price = product.price || \"0\";\n    try {\n      price = parseFloat(price).toFixed(2);\n    } catch {\n      // Leave as is\n    }\n    combinedHTML += buildPythonStyleEmail({\n      subject: product.title || \"\",\n      amazonUrl: product.amazon_url || \"\",\n      walmartUrl: product.walmart_url || \"\",\n      ebayUrl: product.ebay_url || \"\",\n      imageUrl: product.image_url || \"\",\n      price,\n      moq: product.moq || \"0\",\n      qty: product.qty || \"0\",\n      asin: product.asin || \"\",\n      fob: product.fob || \"\",\n      expDate: product.exp_date || \"\",\n      leadTime\n    });\n    combinedHTML += \"<hr>\";\n  }\n  const emailData = {\n    subject: `Group Deal: ${selectedProducts.length} Products Available!`,\n    content: combinedHTML,\n    public: false,\n    email_template_id: null\n  };\n  try {\n    const response = await axios.post(API_URL, emailData, {\n      headers\n    });\n    if (response.status === 201) {\n      console.log(\"✅ Group email draft successfully created.\");\n      for (const product of selectedProducts) {\n        if (product && product.id) {\n          try {\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\n            await updateLastSent(product.id);\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\n          } catch (err) {\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\n          }\n        } else {\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\n        }\n      }\n    } else {\n      console.error(\"❌ Failed to send group email:\", response.data);\n    }\n  } catch (error) {\n    console.error(\"Error sending group email:\", error);\n  }\n}\n\n/**\r\n * ✅ Update Last Sent Timestamp in DB (Preserves Formatting)\r\n */\nasync function updateLastSent(productId) {\n  if (!productId) {\n    console.error(\"❌ updateLastSent called with invalid product ID.\");\n    return;\n  }\n  try {\n    console.log(`⏳ Sending update request for last_sent: ${productId}`);\n    const response = await updateProduct(productId, {\n      last_sent: new Date().toISOString()\n    });\n    if (response.status === 200) {\n      console.log(`✅ Successfully updated last_sent for Product ID: ${productId}`);\n    } else {\n      console.error(`❌ Unexpected response updating last_sent for ${productId}:`, response);\n    }\n  } catch (err) {\n    console.error(`❌ Error updating last_sent for product ${productId}:`, err);\n  }\n}\n\n/**\r\n * ✅ Build the Email EXACTLY Like Python Code\r\n */\nfunction buildPythonStyleEmail({\n  subject,\n  amazonUrl,\n  walmartUrl,\n  ebayUrl,\n  imageUrl,\n  price,\n  moq,\n  qty,\n  asin,\n  fob,\n  expDate,\n  leadTime\n}) {\n  let emailBody = `\n    <div style=\"text-align:center; padding:20px;\">\n        <h2 style=\"font-size:18px; margin-bottom:20px;\">${subject}</h2>\n        <img src=\"${imageUrl}\" alt=\"${subject}\" style=\"max-width:300px; max-height:300px; object-fit:contain; display:block; margin:auto; margin-top:40px; margin-bottom:40px;\"/>\n  `;\n  if (amazonUrl.includes(\"https\")) {\n    emailBody += `\n            <a href=\"${amazonUrl}\" style=\"background-color:#FF9900; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Amazon Link</a>\n    `;\n  }\n  if (walmartUrl.includes(\"https\")) {\n    emailBody += `\n            <a href=\"${walmartUrl}\" style=\"background-color:#0071CE; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Walmart Link</a>\n    `;\n  }\n  if (ebayUrl.includes(\"https\")) {\n    emailBody += `\n            <a href=\"${ebayUrl}\" style=\"background-color:#E53238; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">eBay Link</a>\n    `;\n  }\n  emailBody += `\n            <p style=\"font-size:18px; margin-top:40px;\">$${price} EA, MOQ ${moq}, ${qty} Available.</p>\n            <p style=\"font-size:18px;\">ASIN: ${asin}</p>\n  `;\n  if (fob) emailBody += `<p style=\"font-size:18px;\">FOB: ${fob}</p>`;\n  if (expDate) emailBody += `<p style=\"font-size:18px;\">Expiration Date: ${expDate}</p>`;\n  emailBody += `<p style=\"font-size:18px;\">Lead Time: ${leadTime}</p></div>`;\n  return emailBody;\n}","map":{"version":3,"names":["axios","updateProduct","API_URL","API_KEY","headers","Accept","trackLastSent","productId","response","fetch","method","ok","Error","status","data","json","console","log","error","sendIndividualEmails","selectedProducts","length","product","title","leadTime","lead_time","includes","replace","price","parseFloat","toFixed","emailBody","buildPythonStyleEmail","subject","amazonUrl","amazon_url","walmartUrl","walmart_url","ebayUrl","ebay_url","imageUrl","image_url","moq","qty","asin","fob","expDate","exp_date","emailData","trim","content","public","email_template_id","post","id","updateLastSent","err","sendGroupEmail","combinedHTML","last_sent","Date","toISOString"],"sources":["C:/Users/josep/Documents/NPP_Deals/frontend/src/emailSender.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { updateProduct } from \"./api\"; // ✅ Ensures last_sent tracking works\r\n\r\nconst API_URL = \"https://api.kit.com/v4/broadcasts\";\r\nconst API_KEY = \"kit_a0a183e8fd744ca557d96126e488ae22\";\r\n\r\nconst headers = {\r\n  Accept: \"application/json\",\r\n  \"Content-Type\": \"application/json\",\r\n  \"X-Kit-Api-Key\": API_KEY,\r\n};\r\n\r\n/**\r\n * POST /products/{product_id}/track-last-sent\r\n */\r\nasync function trackLastSent(productId) {\r\n  try {\r\n    const response = await fetch(`http://127.0.0.1:8000/products/${productId}/track-last-sent/`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP Error ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log(\"✅ last_sent updated in DB:\", data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error updating last_sent via trackLastSent:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Send Individual Emails & Then Track last_sent\r\n */\r\nexport async function sendIndividualEmails(selectedProducts) {\r\n  if (!selectedProducts || selectedProducts.length === 0) {\r\n    console.error(\"No products selected for individual email.\");\r\n    return;\r\n  }\r\n\r\n  for (const product of selectedProducts) {\r\n    if (!product || !product.title) {\r\n      console.error(\"Skipping invalid product:\", product);\r\n      continue;\r\n    }\r\n\r\n    // ✅ Standardize lead time format\r\n    let leadTime = product.lead_time || \"\";\r\n    if (leadTime.includes(\"Days\")) {\r\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\r\n    }\r\n\r\n    // ✅ Format price to 2 decimal places\r\n    let price = product.price || \"0\";\r\n    try {\r\n      price = parseFloat(price).toFixed(2);\r\n    } catch {\r\n      // Leave as is\r\n    }\r\n\r\n    // ✅ Build the email body (exact match to Python)\r\n    const emailBody = buildPythonStyleEmail({\r\n      subject: product.title || \"\",\r\n      amazonUrl: product.amazon_url || \"\",\r\n      walmartUrl: product.walmart_url || \"\",\r\n      ebayUrl: product.ebay_url || \"\",\r\n      imageUrl: product.image_url || \"\",\r\n      price,\r\n      moq: product.moq || \"0\",\r\n      qty: product.qty || \"0\",\r\n      asin: product.asin || \"\",\r\n      fob: product.fob || \"\",\r\n      expDate: product.exp_date || \"\",\r\n      leadTime,\r\n    });\r\n\r\n    const emailData = {\r\n      subject: (product.title || \"\").trim(),\r\n      content: emailBody,\r\n      public: false, // Draft mode\r\n      email_template_id: null,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(API_URL, emailData, { headers });\r\n      if (response.status === 201) {\r\n        console.log(`✅ Email draft successfully created for: ${product.title}`);\r\n      \r\n        if (product.id) {\r\n          try {\r\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\r\n            await updateLastSent(product.id);\r\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\r\n          } catch (err) {\r\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\r\n          }\r\n        } else {\r\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\r\n        }\r\n      } else {\r\n        console.error(`❌ Failed to send email for ${product.title}:`, response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error sending email for ${product.title}:`, error);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Send Group Email & Update Last Sent for All Products\r\n */\r\nexport async function sendGroupEmail(selectedProducts) {\r\n  if (!selectedProducts || selectedProducts.length === 0) {\r\n    console.error(\"No products selected for group email.\");\r\n    return;\r\n  }\r\n\r\n  let combinedHTML = \"\";\r\n  for (const product of selectedProducts) {\r\n    if (!product || !product.title) {\r\n      console.error(\"Skipping invalid product in group:\", product);\r\n      continue;\r\n    }\r\n\r\n    let leadTime = product.lead_time || \"\";\r\n    if (leadTime.includes(\"Days\")) {\r\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\r\n    }\r\n\r\n    let price = product.price || \"0\";\r\n    try {\r\n      price = parseFloat(price).toFixed(2);\r\n    } catch {\r\n      // Leave as is\r\n    }\r\n\r\n    combinedHTML += buildPythonStyleEmail({\r\n      subject: product.title || \"\",\r\n      amazonUrl: product.amazon_url || \"\",\r\n      walmartUrl: product.walmart_url || \"\",\r\n      ebayUrl: product.ebay_url || \"\",\r\n      imageUrl: product.image_url || \"\",\r\n      price,\r\n      moq: product.moq || \"0\",\r\n      qty: product.qty || \"0\",\r\n      asin: product.asin || \"\",\r\n      fob: product.fob || \"\",\r\n      expDate: product.exp_date || \"\",\r\n      leadTime,\r\n    });\r\n\r\n    combinedHTML += \"<hr>\";\r\n  }\r\n\r\n  const emailData = {\r\n    subject: `Group Deal: ${selectedProducts.length} Products Available!`,\r\n    content: combinedHTML,\r\n    public: false,\r\n    email_template_id: null,\r\n  };\r\n\r\n  try {\r\n    const response = await axios.post(API_URL, emailData, { headers });\r\n    if (response.status === 201) {\r\n      console.log(\"✅ Group email draft successfully created.\");\r\n    \r\n      for (const product of selectedProducts) {\r\n        if (product && product.id) {\r\n          try {\r\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\r\n            await updateLastSent(product.id);\r\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\r\n          } catch (err) {\r\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\r\n          }\r\n        } else {\r\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\r\n        }\r\n      }\r\n    } else {\r\n      console.error(\"❌ Failed to send group email:\", response.data);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error sending group email:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Update Last Sent Timestamp in DB (Preserves Formatting)\r\n */\r\nasync function updateLastSent(productId) {\r\n  if (!productId) {\r\n    console.error(\"❌ updateLastSent called with invalid product ID.\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    console.log(`⏳ Sending update request for last_sent: ${productId}`);\r\n    const response = await updateProduct(productId, { last_sent: new Date().toISOString() });\r\n\r\n    if (response.status === 200) {\r\n      console.log(`✅ Successfully updated last_sent for Product ID: ${productId}`);\r\n    } else {\r\n      console.error(`❌ Unexpected response updating last_sent for ${productId}:`, response);\r\n    }\r\n  } catch (err) {\r\n    console.error(`❌ Error updating last_sent for product ${productId}:`, err);\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Build the Email EXACTLY Like Python Code\r\n */\r\nfunction buildPythonStyleEmail({\r\n  subject,\r\n  amazonUrl,\r\n  walmartUrl,\r\n  ebayUrl,\r\n  imageUrl,\r\n  price,\r\n  moq,\r\n  qty,\r\n  asin,\r\n  fob,\r\n  expDate,\r\n  leadTime,\r\n}) {\r\n  let emailBody = `\r\n    <div style=\"text-align:center; padding:20px;\">\r\n        <h2 style=\"font-size:18px; margin-bottom:20px;\">${subject}</h2>\r\n        <img src=\"${imageUrl}\" alt=\"${subject}\" style=\"max-width:300px; max-height:300px; object-fit:contain; display:block; margin:auto; margin-top:40px; margin-bottom:40px;\"/>\r\n  `;\r\n\r\n  if (amazonUrl.includes(\"https\")) {\r\n    emailBody += `\r\n            <a href=\"${amazonUrl}\" style=\"background-color:#FF9900; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Amazon Link</a>\r\n    `;\r\n  }\r\n  if (walmartUrl.includes(\"https\")) {\r\n    emailBody += `\r\n            <a href=\"${walmartUrl}\" style=\"background-color:#0071CE; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Walmart Link</a>\r\n    `;\r\n  }\r\n  if (ebayUrl.includes(\"https\")) {\r\n    emailBody += `\r\n            <a href=\"${ebayUrl}\" style=\"background-color:#E53238; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">eBay Link</a>\r\n    `;\r\n  }\r\n\r\n  emailBody += `\r\n            <p style=\"font-size:18px; margin-top:40px;\">$${price} EA, MOQ ${moq}, ${qty} Available.</p>\r\n            <p style=\"font-size:18px;\">ASIN: ${asin}</p>\r\n  `;\r\n\r\n  if (fob) emailBody += `<p style=\"font-size:18px;\">FOB: ${fob}</p>`;\r\n  if (expDate) emailBody += `<p style=\"font-size:18px;\">Expiration Date: ${expDate}</p>`;\r\n\r\n  emailBody += `<p style=\"font-size:18px;\">Lead Time: ${leadTime}</p></div>`;\r\n\r\n  return emailBody;\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,OAAO,CAAC,CAAC;;AAEvC,MAAMC,OAAO,GAAG,mCAAmC;AACnD,MAAMC,OAAO,GAAG,sCAAsC;AAEtD,MAAMC,OAAO,GAAG;EACdC,MAAM,EAAE,kBAAkB;EAC1B,cAAc,EAAE,kBAAkB;EAClC,eAAe,EAAEF;AACnB,CAAC;;AAED;AACA;AACA;AACA,eAAeG,aAAaA,CAACC,SAAS,EAAE;EACtC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAkCF,SAAS,mBAAmB,EAAE;MAC3FG,MAAM,EAAE,MAAM;MACdN,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB;IAChD,CAAC,CAAC;IACF,IAAI,CAACI,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,cAAcJ,QAAQ,CAACK,MAAM,EAAE,CAAC;IAClD;IACA,MAAMC,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClCC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEH,IAAI,CAAC;IAC/C,OAAOA,IAAI;EACb,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,6CAA6C,EAAEA,KAAK,CAAC;EACrE;AACF;;AAEA;AACA;AACA;AACA,OAAO,eAAeC,oBAAoBA,CAACC,gBAAgB,EAAE;EAC3D,IAAI,CAACA,gBAAgB,IAAIA,gBAAgB,CAACC,MAAM,KAAK,CAAC,EAAE;IACtDL,OAAO,CAACE,KAAK,CAAC,4CAA4C,CAAC;IAC3D;EACF;EAEA,KAAK,MAAMI,OAAO,IAAIF,gBAAgB,EAAE;IACtC,IAAI,CAACE,OAAO,IAAI,CAACA,OAAO,CAACC,KAAK,EAAE;MAC9BP,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEI,OAAO,CAAC;MACnD;IACF;;IAEA;IACA,IAAIE,QAAQ,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;IACtC,IAAID,QAAQ,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC7BF,QAAQ,GAAGA,QAAQ,CAACG,OAAO,CAAC,MAAM,EAAE,eAAe,CAAC;IACtD;;IAEA;IACA,IAAIC,KAAK,GAAGN,OAAO,CAACM,KAAK,IAAI,GAAG;IAChC,IAAI;MACFA,KAAK,GAAGC,UAAU,CAACD,KAAK,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,MAAM;MACN;IAAA;;IAGF;IACA,MAAMC,SAAS,GAAGC,qBAAqB,CAAC;MACtCC,OAAO,EAAEX,OAAO,CAACC,KAAK,IAAI,EAAE;MAC5BW,SAAS,EAAEZ,OAAO,CAACa,UAAU,IAAI,EAAE;MACnCC,UAAU,EAAEd,OAAO,CAACe,WAAW,IAAI,EAAE;MACrCC,OAAO,EAAEhB,OAAO,CAACiB,QAAQ,IAAI,EAAE;MAC/BC,QAAQ,EAAElB,OAAO,CAACmB,SAAS,IAAI,EAAE;MACjCb,KAAK;MACLc,GAAG,EAAEpB,OAAO,CAACoB,GAAG,IAAI,GAAG;MACvBC,GAAG,EAAErB,OAAO,CAACqB,GAAG,IAAI,GAAG;MACvBC,IAAI,EAAEtB,OAAO,CAACsB,IAAI,IAAI,EAAE;MACxBC,GAAG,EAAEvB,OAAO,CAACuB,GAAG,IAAI,EAAE;MACtBC,OAAO,EAAExB,OAAO,CAACyB,QAAQ,IAAI,EAAE;MAC/BvB;IACF,CAAC,CAAC;IAEF,MAAMwB,SAAS,GAAG;MAChBf,OAAO,EAAE,CAACX,OAAO,CAACC,KAAK,IAAI,EAAE,EAAE0B,IAAI,CAAC,CAAC;MACrCC,OAAO,EAAEnB,SAAS;MAClBoB,MAAM,EAAE,KAAK;MAAE;MACfC,iBAAiB,EAAE;IACrB,CAAC;IAED,IAAI;MACF,MAAM5C,QAAQ,GAAG,MAAMR,KAAK,CAACqD,IAAI,CAACnD,OAAO,EAAE8C,SAAS,EAAE;QAAE5C;MAAQ,CAAC,CAAC;MAClE,IAAII,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;QAC3BG,OAAO,CAACC,GAAG,CAAC,2CAA2CK,OAAO,CAACC,KAAK,EAAE,CAAC;QAEvE,IAAID,OAAO,CAACgC,EAAE,EAAE;UACd,IAAI;YACFtC,OAAO,CAACC,GAAG,CAAC,wCAAwCK,OAAO,CAACgC,EAAE,EAAE,CAAC;YACjE,MAAMC,cAAc,CAACjC,OAAO,CAACgC,EAAE,CAAC;YAChCtC,OAAO,CAACC,GAAG,CAAC,yCAAyCK,OAAO,CAACgC,EAAE,EAAE,CAAC;UACpE,CAAC,CAAC,OAAOE,GAAG,EAAE;YACZxC,OAAO,CAACE,KAAK,CAAC,oCAAoCI,OAAO,CAACgC,EAAE,GAAG,EAAEE,GAAG,CAAC;UACvE;QACF,CAAC,MAAM;UACLxC,OAAO,CAACE,KAAK,CAAC,4CAA4C,EAAEI,OAAO,CAAC;QACtE;MACF,CAAC,MAAM;QACLN,OAAO,CAACE,KAAK,CAAC,8BAA8BI,OAAO,CAACC,KAAK,GAAG,EAAEf,QAAQ,CAACM,IAAI,CAAC;MAC9E;IACF,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,2BAA2BI,OAAO,CAACC,KAAK,GAAG,EAAEL,KAAK,CAAC;IACnE;EACF;AACF;;AAEA;AACA;AACA;AACA,OAAO,eAAeuC,cAAcA,CAACrC,gBAAgB,EAAE;EACrD,IAAI,CAACA,gBAAgB,IAAIA,gBAAgB,CAACC,MAAM,KAAK,CAAC,EAAE;IACtDL,OAAO,CAACE,KAAK,CAAC,uCAAuC,CAAC;IACtD;EACF;EAEA,IAAIwC,YAAY,GAAG,EAAE;EACrB,KAAK,MAAMpC,OAAO,IAAIF,gBAAgB,EAAE;IACtC,IAAI,CAACE,OAAO,IAAI,CAACA,OAAO,CAACC,KAAK,EAAE;MAC9BP,OAAO,CAACE,KAAK,CAAC,oCAAoC,EAAEI,OAAO,CAAC;MAC5D;IACF;IAEA,IAAIE,QAAQ,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;IACtC,IAAID,QAAQ,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC7BF,QAAQ,GAAGA,QAAQ,CAACG,OAAO,CAAC,MAAM,EAAE,eAAe,CAAC;IACtD;IAEA,IAAIC,KAAK,GAAGN,OAAO,CAACM,KAAK,IAAI,GAAG;IAChC,IAAI;MACFA,KAAK,GAAGC,UAAU,CAACD,KAAK,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,MAAM;MACN;IAAA;IAGF4B,YAAY,IAAI1B,qBAAqB,CAAC;MACpCC,OAAO,EAAEX,OAAO,CAACC,KAAK,IAAI,EAAE;MAC5BW,SAAS,EAAEZ,OAAO,CAACa,UAAU,IAAI,EAAE;MACnCC,UAAU,EAAEd,OAAO,CAACe,WAAW,IAAI,EAAE;MACrCC,OAAO,EAAEhB,OAAO,CAACiB,QAAQ,IAAI,EAAE;MAC/BC,QAAQ,EAAElB,OAAO,CAACmB,SAAS,IAAI,EAAE;MACjCb,KAAK;MACLc,GAAG,EAAEpB,OAAO,CAACoB,GAAG,IAAI,GAAG;MACvBC,GAAG,EAAErB,OAAO,CAACqB,GAAG,IAAI,GAAG;MACvBC,IAAI,EAAEtB,OAAO,CAACsB,IAAI,IAAI,EAAE;MACxBC,GAAG,EAAEvB,OAAO,CAACuB,GAAG,IAAI,EAAE;MACtBC,OAAO,EAAExB,OAAO,CAACyB,QAAQ,IAAI,EAAE;MAC/BvB;IACF,CAAC,CAAC;IAEFkC,YAAY,IAAI,MAAM;EACxB;EAEA,MAAMV,SAAS,GAAG;IAChBf,OAAO,EAAE,eAAeb,gBAAgB,CAACC,MAAM,sBAAsB;IACrE6B,OAAO,EAAEQ,YAAY;IACrBP,MAAM,EAAE,KAAK;IACbC,iBAAiB,EAAE;EACrB,CAAC;EAED,IAAI;IACF,MAAM5C,QAAQ,GAAG,MAAMR,KAAK,CAACqD,IAAI,CAACnD,OAAO,EAAE8C,SAAS,EAAE;MAAE5C;IAAQ,CAAC,CAAC;IAClE,IAAII,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;MAC3BG,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;MAExD,KAAK,MAAMK,OAAO,IAAIF,gBAAgB,EAAE;QACtC,IAAIE,OAAO,IAAIA,OAAO,CAACgC,EAAE,EAAE;UACzB,IAAI;YACFtC,OAAO,CAACC,GAAG,CAAC,wCAAwCK,OAAO,CAACgC,EAAE,EAAE,CAAC;YACjE,MAAMC,cAAc,CAACjC,OAAO,CAACgC,EAAE,CAAC;YAChCtC,OAAO,CAACC,GAAG,CAAC,yCAAyCK,OAAO,CAACgC,EAAE,EAAE,CAAC;UACpE,CAAC,CAAC,OAAOE,GAAG,EAAE;YACZxC,OAAO,CAACE,KAAK,CAAC,oCAAoCI,OAAO,CAACgC,EAAE,GAAG,EAAEE,GAAG,CAAC;UACvE;QACF,CAAC,MAAM;UACLxC,OAAO,CAACE,KAAK,CAAC,4CAA4C,EAAEI,OAAO,CAAC;QACtE;MACF;IACF,CAAC,MAAM;MACLN,OAAO,CAACE,KAAK,CAAC,+BAA+B,EAAEV,QAAQ,CAACM,IAAI,CAAC;IAC/D;EACF,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;EACpD;AACF;;AAEA;AACA;AACA;AACA,eAAeqC,cAAcA,CAAChD,SAAS,EAAE;EACvC,IAAI,CAACA,SAAS,EAAE;IACdS,OAAO,CAACE,KAAK,CAAC,kDAAkD,CAAC;IACjE;EACF;EAEA,IAAI;IACFF,OAAO,CAACC,GAAG,CAAC,2CAA2CV,SAAS,EAAE,CAAC;IACnE,MAAMC,QAAQ,GAAG,MAAMP,aAAa,CAACM,SAAS,EAAE;MAAEoD,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IAAE,CAAC,CAAC;IAExF,IAAIrD,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;MAC3BG,OAAO,CAACC,GAAG,CAAC,oDAAoDV,SAAS,EAAE,CAAC;IAC9E,CAAC,MAAM;MACLS,OAAO,CAACE,KAAK,CAAC,gDAAgDX,SAAS,GAAG,EAAEC,QAAQ,CAAC;IACvF;EACF,CAAC,CAAC,OAAOgD,GAAG,EAAE;IACZxC,OAAO,CAACE,KAAK,CAAC,0CAA0CX,SAAS,GAAG,EAAEiD,GAAG,CAAC;EAC5E;AACF;;AAEA;AACA;AACA;AACA,SAASxB,qBAAqBA,CAAC;EAC7BC,OAAO;EACPC,SAAS;EACTE,UAAU;EACVE,OAAO;EACPE,QAAQ;EACRZ,KAAK;EACLc,GAAG;EACHC,GAAG;EACHC,IAAI;EACJC,GAAG;EACHC,OAAO;EACPtB;AACF,CAAC,EAAE;EACD,IAAIO,SAAS,GAAG;AAClB;AACA,0DAA0DE,OAAO;AACjE,oBAAoBO,QAAQ,UAAUP,OAAO;AAC7C,GAAG;EAED,IAAIC,SAAS,CAACR,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC/BK,SAAS,IAAI;AACjB,uBAAuBG,SAAS;AAChC,KAAK;EACH;EACA,IAAIE,UAAU,CAACV,QAAQ,CAAC,OAAO,CAAC,EAAE;IAChCK,SAAS,IAAI;AACjB,uBAAuBK,UAAU;AACjC,KAAK;EACH;EACA,IAAIE,OAAO,CAACZ,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC7BK,SAAS,IAAI;AACjB,uBAAuBO,OAAO;AAC9B,KAAK;EACH;EAEAP,SAAS,IAAI;AACf,2DAA2DH,KAAK,YAAYc,GAAG,KAAKC,GAAG;AACvF,+CAA+CC,IAAI;AACnD,GAAG;EAED,IAAIC,GAAG,EAAEd,SAAS,IAAI,mCAAmCc,GAAG,MAAM;EAClE,IAAIC,OAAO,EAAEf,SAAS,IAAI,+CAA+Ce,OAAO,MAAM;EAEtFf,SAAS,IAAI,yCAAyCP,QAAQ,YAAY;EAE1E,OAAOO,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}