{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{TextField,Button,Box,Typography,Container}from\"@mui/material\";import{login}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const response=await login(username,password);const{access_token}=response;if(access_token){localStorage.setItem(\"token\",access_token);navigate(\"/products\");}else{setError(\"Login failed: No token received\");}}catch(err){setError(\"Login failed: \"+err.message);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Box,{sx:{mt:8,display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",autoFocus:true,value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:e=>setPassword(e.target.value)}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mt:2},children:error}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Sign In\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","TextField","Button","Box","Typography","Container","login","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","error","setError","navigate","handleSubmit","e","preventDefault","response","access_token","localStorage","setItem","err","message","maxWidth","children","sx","mt","display","flexDirection","alignItems","component","variant","onSubmit","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","target","type","color","mb"],"sources":["/root/NPP_Deals/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { TextField, Button, Box, Typography, Container } from \"@mui/material\";\nimport { login } from \"../api\";\n\nconst Login = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await login(username, password);\n      const { access_token } = response;\n      if (access_token) {\n        localStorage.setItem(\"token\", access_token);\n        navigate(\"/products\");\n      } else {\n        setError(\"Login failed: No token received\");\n      }\n    } catch (err) {\n      setError(\"Login failed: \" + err.message);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"xs\">\n      <Box sx={{ mt: 8, display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign in\n        </Typography>\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n          <TextField\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"username\"\n            label=\"Username\"\n            name=\"username\"\n            autoComplete=\"username\"\n            autoFocus\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n          <TextField\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          {error && (\n            <Typography color=\"error\" sx={{ mt: 2 }}>\n              {error}\n            </Typography>\n          )}\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            sx={{ mt: 3, mb: 2 }}\n          >\n            Sign In\n          </Button>\n        </Box>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}