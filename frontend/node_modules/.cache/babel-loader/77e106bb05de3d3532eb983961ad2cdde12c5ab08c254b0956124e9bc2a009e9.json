{"ast":null,"code":"import axios from \"axios\";\nconst API_URL = \"https://api.kit.com/v4/broadcasts\"; // Update if needed\nconst API_KEY = \"kit_a0a183e8fd744ca557d96126e488ae22\"; // Use your actual API key\n\nconst headers = {\n  \"Accept\": \"application/json\",\n  \"Content-Type\": \"application/json\",\n  \"X-Kit-Api-Key\": API_KEY\n};\nexport async function sendIndividualEmails(selectedProducts) {\n  if (selectedProducts.length === 0) {\n    console.error(\"No products selected for individual email.\");\n    return;\n  }\n  for (const product of selectedProducts) {\n    const emailData = {\n      subject: product.title,\n      content: generateEmailBody(product),\n      public: false,\n      // Draft mode\n      email_template_id: null // Use default template\n    };\n    try {\n      const response = await axios.post(API_URL, emailData, {\n        headers\n      });\n      if (response.status === 201) {\n        console.log(`Email draft created for: ${product.title}`);\n      } else {\n        console.error(`Failed to send email for ${product.title}:`, response.data);\n      }\n    } catch (error) {\n      console.error(`Error sending email for ${product.title}:`, error);\n    }\n  }\n}\nexport async function sendGroupEmail(selectedProducts) {\n  if (selectedProducts.length === 0) {\n    console.error(\"No products selected for group email.\");\n    return;\n  }\n  const emailData = {\n    subject: `Group Deal: ${selectedProducts.length} Products Available!`,\n    content: selectedProducts.map(generateEmailBody).join(\"<hr>\"),\n    public: false,\n    // Draft mode\n    email_template_id: null // Use default template\n  };\n  try {\n    const response = await axios.post(API_URL, emailData, {\n      headers\n    });\n    if (response.status === 201) {\n      console.log(\"Group email draft created successfully.\");\n    } else {\n      console.error(\"Failed to send group email:\", response.data);\n    }\n  } catch (error) {\n    console.error(\"Error sending group email:\", error);\n  }\n}\nfunction generateEmailBody(product) {\n  return `\n    <div style=\"text-align:center; margin-bottom: 60px;\">\n        <h2>${product.title}</h2>\n        <img src=\"${product.image_url}\" alt=\"${product.title}\" style=\"max-width:300px;\"/>\n        <p>Price: $${product.price} | MOQ: ${product.moq} | Available: ${product.qty}</p>\n        ${product.amazon_url ? `<a href=\"${product.amazon_url}\">Amazon</a>` : \"\"}\n        ${product.walmart_url ? `<a href=\"${product.walmart_url}\">Walmart</a>` : \"\"}\n        ${product.ebay_url ? `<a href=\"${product.ebay_url}\">eBay</a>` : \"\"}\n    </div>\n  `;\n}","map":{"version":3,"names":["axios","API_URL","API_KEY","headers","sendIndividualEmails","selectedProducts","length","console","error","product","emailData","subject","title","content","generateEmailBody","public","email_template_id","response","post","status","log","data","sendGroupEmail","map","join","image_url","price","moq","qty","amazon_url","walmart_url","ebay_url"],"sources":["C:/Users/josep/Documents/NPP_Deals/frontend/src/emailSender.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_URL = \"https://api.kit.com/v4/broadcasts\"; // Update if needed\r\nconst API_KEY = \"kit_a0a183e8fd744ca557d96126e488ae22\"; // Use your actual API key\r\n\r\nconst headers = {\r\n  \"Accept\": \"application/json\",\r\n  \"Content-Type\": \"application/json\",\r\n  \"X-Kit-Api-Key\": API_KEY,\r\n};\r\n\r\nexport async function sendIndividualEmails(selectedProducts) {\r\n  if (selectedProducts.length === 0) {\r\n    console.error(\"No products selected for individual email.\");\r\n    return;\r\n  }\r\n\r\n  for (const product of selectedProducts) {\r\n    const emailData = {\r\n      subject: product.title,\r\n      content: generateEmailBody(product),\r\n      public: false, // Draft mode\r\n      email_template_id: null, // Use default template\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(API_URL, emailData, { headers });\r\n      if (response.status === 201) {\r\n        console.log(`Email draft created for: ${product.title}`);\r\n      } else {\r\n        console.error(`Failed to send email for ${product.title}:`, response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error sending email for ${product.title}:`, error);\r\n    }\r\n  }\r\n}\r\n\r\nexport async function sendGroupEmail(selectedProducts) {\r\n  if (selectedProducts.length === 0) {\r\n    console.error(\"No products selected for group email.\");\r\n    return;\r\n  }\r\n\r\n  const emailData = {\r\n    subject: `Group Deal: ${selectedProducts.length} Products Available!`,\r\n    content: selectedProducts.map(generateEmailBody).join(\"<hr>\"),\r\n    public: false, // Draft mode\r\n    email_template_id: null, // Use default template\r\n  };\r\n\r\n  try {\r\n    const response = await axios.post(API_URL, emailData, { headers });\r\n    if (response.status === 201) {\r\n      console.log(\"Group email draft created successfully.\");\r\n    } else {\r\n      console.error(\"Failed to send group email:\", response.data);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error sending group email:\", error);\r\n  }\r\n}\r\n\r\nfunction generateEmailBody(product) {\r\n  return `\r\n    <div style=\"text-align:center; margin-bottom: 60px;\">\r\n        <h2>${product.title}</h2>\r\n        <img src=\"${product.image_url}\" alt=\"${product.title}\" style=\"max-width:300px;\"/>\r\n        <p>Price: $${product.price} | MOQ: ${product.moq} | Available: ${product.qty}</p>\r\n        ${product.amazon_url ? `<a href=\"${product.amazon_url}\">Amazon</a>` : \"\"}\r\n        ${product.walmart_url ? `<a href=\"${product.walmart_url}\">Walmart</a>` : \"\"}\r\n        ${product.ebay_url ? `<a href=\"${product.ebay_url}\">eBay</a>` : \"\"}\r\n    </div>\r\n  `;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}