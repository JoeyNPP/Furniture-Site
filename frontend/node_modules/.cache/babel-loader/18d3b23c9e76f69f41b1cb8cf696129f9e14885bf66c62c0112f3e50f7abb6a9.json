{"ast":null,"code":"import axios from \"axios\";\nimport { updateProduct } from \"./api\"; // ✅ Ensures last_sent tracking works\n\nconst API_URL = \"https://api.kit.com/v4/broadcasts\";\nconst API_KEY = \"kit_a0a183e8fd744ca557d96126e488ae22\";\nconst headers = {\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  \"X-Kit-Api-Key\": API_KEY\n};\n\n/**\r\n * ✅ Send Individual Emails & Update Last Sent\r\n */\nexport async function sendIndividualEmails(selectedProducts) {\n  if (!selectedProducts || selectedProducts.length === 0) {\n    console.error(\"No products selected for individual email.\");\n    return;\n  }\n  for (const product of selectedProducts) {\n    if (!product || !product.title) {\n      console.error(\"Skipping invalid product:\", product);\n      continue;\n    }\n\n    // ✅ Standardize lead time format\n    let leadTime = product.lead_time || \"\";\n    if (leadTime.includes(\"Days\")) {\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\n    }\n\n    // ✅ Format price to 2 decimal places\n    let price = product.price || \"0\";\n    try {\n      price = parseFloat(price).toFixed(2);\n    } catch {\n      // Leave as is\n    }\n\n    // ✅ Build the email body (exact match to Python)\n    const emailBody = buildPythonStyleEmail({\n      subject: product.title || \"\",\n      amazonUrl: product.amazon_url || \"\",\n      walmartUrl: product.walmart_url || \"\",\n      ebayUrl: product.ebay_url || \"\",\n      imageUrl: product.image_url || \"\",\n      price,\n      moq: product.moq || \"0\",\n      qty: product.qty || \"0\",\n      asin: product.asin || \"\",\n      fob: product.fob || \"\",\n      expDate: product.exp_date || \"\",\n      leadTime\n    });\n    const emailData = {\n      subject: (product.title || \"\").trim(),\n      content: emailBody,\n      public: false,\n      // Draft mode\n      email_template_id: null\n    };\n    try {\n      const response = await axios.post(API_URL, emailData, {\n        headers\n      });\n      if (response.status === 201) {\n        console.log(`✅ Email draft successfully created for: ${product.title}`);\n        if (product.id) {\n          try {\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\n            await updateLastSent(product.id);\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\n          } catch (err) {\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\n          }\n        } else {\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\n        }\n      } else {\n        console.error(`❌ Failed to send email for ${product.title}:`, response.data);\n      }\n    } catch (error) {\n      console.error(`Error sending email for ${product.title}:`, error);\n    }\n  }\n}\n\n/**\r\n * ✅ Send Group Email & Update Last Sent for All Products\r\n */\nexport async function sendGroupEmail(selectedProducts) {\n  if (!selectedProducts || selectedProducts.length === 0) {\n    console.error(\"No products selected for group email.\");\n    return;\n  }\n  let combinedHTML = \"\";\n  for (const product of selectedProducts) {\n    if (!product || !product.title) {\n      console.error(\"Skipping invalid product in group:\", product);\n      continue;\n    }\n    let leadTime = product.lead_time || \"\";\n    if (leadTime.includes(\"Days\")) {\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\n    }\n    let price = product.price || \"0\";\n    try {\n      price = parseFloat(price).toFixed(2);\n    } catch {\n      // Leave as is\n    }\n    combinedHTML += buildPythonStyleEmail({\n      subject: product.title || \"\",\n      amazonUrl: product.amazon_url || \"\",\n      walmartUrl: product.walmart_url || \"\",\n      ebayUrl: product.ebay_url || \"\",\n      imageUrl: product.image_url || \"\",\n      price,\n      moq: product.moq || \"0\",\n      qty: product.qty || \"0\",\n      asin: product.asin || \"\",\n      fob: product.fob || \"\",\n      expDate: product.exp_date || \"\",\n      leadTime\n    });\n    combinedHTML += \"<hr>\";\n  }\n  const emailData = {\n    subject: `Group Deal: ${selectedProducts.length} Products Available!`,\n    content: combinedHTML,\n    public: false,\n    email_template_id: null\n  };\n  try {\n    const response = await axios.post(API_URL, emailData, {\n      headers\n    });\n    if (response.status === 201) {\n      console.log(\"✅ Group email draft successfully created.\");\n      for (const product of selectedProducts) {\n        if (product && product.id) {\n          try {\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\n            await updateLastSent(product.id);\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\n          } catch (err) {\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\n          }\n        } else {\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\n        }\n      }\n    } else {\n      console.error(\"❌ Failed to send group email:\", response.data);\n    }\n  } catch (error) {\n    console.error(\"Error sending group email:\", error);\n  }\n}\n\n/**\r\n * ✅ Update Last Sent Timestamp in DB (Preserves Formatting)\r\n */\nasync function updateLastSent(productId) {\n  try {\n    await updateProduct(productId, {\n      last_sent: new Date().toISOString()\n    });\n    console.log(`last_sent updated for product: ${productId}`);\n  } catch (err) {\n    console.error(`Error updating last_sent for product ${productId}:`, err);\n  }\n}\n\n/**\r\n * ✅ Build the Email EXACTLY Like Python Code\r\n */\nfunction buildPythonStyleEmail({\n  subject,\n  amazonUrl,\n  walmartUrl,\n  ebayUrl,\n  imageUrl,\n  price,\n  moq,\n  qty,\n  asin,\n  fob,\n  expDate,\n  leadTime\n}) {\n  let emailBody = `\n    <div style=\"text-align:center; padding:20px;\">\n        <h2 style=\"font-size:18px; margin-bottom:20px;\">${subject}</h2>\n        <img src=\"${imageUrl}\" alt=\"${subject}\" style=\"max-width:300px; max-height:300px; object-fit:contain; display:block; margin:auto; margin-top:40px; margin-bottom:40px;\"/>\n  `;\n  if (amazonUrl.includes(\"https\")) {\n    emailBody += `\n            <a href=\"${amazonUrl}\" style=\"background-color:#FF9900; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Amazon Link</a>\n    `;\n  }\n  if (walmartUrl.includes(\"https\")) {\n    emailBody += `\n            <a href=\"${walmartUrl}\" style=\"background-color:#0071CE; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Walmart Link</a>\n    `;\n  }\n  if (ebayUrl.includes(\"https\")) {\n    emailBody += `\n            <a href=\"${ebayUrl}\" style=\"background-color:#E53238; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">eBay Link</a>\n    `;\n  }\n  emailBody += `\n            <p style=\"font-size:18px; margin-top:40px;\">$${price} EA, MOQ ${moq}, ${qty} Available.</p>\n            <p style=\"font-size:18px;\">ASIN: ${asin}</p>\n  `;\n  if (fob) emailBody += `<p style=\"font-size:18px;\">FOB: ${fob}</p>`;\n  if (expDate) emailBody += `<p style=\"font-size:18px;\">Expiration Date: ${expDate}</p>`;\n  emailBody += `<p style=\"font-size:18px;\">Lead Time: ${leadTime}</p></div>`;\n  return emailBody;\n}","map":{"version":3,"names":["axios","updateProduct","API_URL","API_KEY","headers","Accept","sendIndividualEmails","selectedProducts","length","console","error","product","title","leadTime","lead_time","includes","replace","price","parseFloat","toFixed","emailBody","buildPythonStyleEmail","subject","amazonUrl","amazon_url","walmartUrl","walmart_url","ebayUrl","ebay_url","imageUrl","image_url","moq","qty","asin","fob","expDate","exp_date","emailData","trim","content","public","email_template_id","response","post","status","log","id","updateLastSent","err","data","sendGroupEmail","combinedHTML","productId","last_sent","Date","toISOString"],"sources":["C:/Users/josep/Documents/NPP_Deals/frontend/src/emailSender.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { updateProduct } from \"./api\"; // ✅ Ensures last_sent tracking works\r\n\r\nconst API_URL = \"https://api.kit.com/v4/broadcasts\";\r\nconst API_KEY = \"kit_a0a183e8fd744ca557d96126e488ae22\";\r\n\r\nconst headers = {\r\n  Accept: \"application/json\",\r\n  \"Content-Type\": \"application/json\",\r\n  \"X-Kit-Api-Key\": API_KEY,\r\n};\r\n\r\n/**\r\n * ✅ Send Individual Emails & Update Last Sent\r\n */\r\nexport async function sendIndividualEmails(selectedProducts) {\r\n  if (!selectedProducts || selectedProducts.length === 0) {\r\n    console.error(\"No products selected for individual email.\");\r\n    return;\r\n  }\r\n\r\n  for (const product of selectedProducts) {\r\n    if (!product || !product.title) {\r\n      console.error(\"Skipping invalid product:\", product);\r\n      continue;\r\n    }\r\n\r\n    // ✅ Standardize lead time format\r\n    let leadTime = product.lead_time || \"\";\r\n    if (leadTime.includes(\"Days\")) {\r\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\r\n    }\r\n\r\n    // ✅ Format price to 2 decimal places\r\n    let price = product.price || \"0\";\r\n    try {\r\n      price = parseFloat(price).toFixed(2);\r\n    } catch {\r\n      // Leave as is\r\n    }\r\n\r\n    // ✅ Build the email body (exact match to Python)\r\n    const emailBody = buildPythonStyleEmail({\r\n      subject: product.title || \"\",\r\n      amazonUrl: product.amazon_url || \"\",\r\n      walmartUrl: product.walmart_url || \"\",\r\n      ebayUrl: product.ebay_url || \"\",\r\n      imageUrl: product.image_url || \"\",\r\n      price,\r\n      moq: product.moq || \"0\",\r\n      qty: product.qty || \"0\",\r\n      asin: product.asin || \"\",\r\n      fob: product.fob || \"\",\r\n      expDate: product.exp_date || \"\",\r\n      leadTime,\r\n    });\r\n\r\n    const emailData = {\r\n      subject: (product.title || \"\").trim(),\r\n      content: emailBody,\r\n      public: false, // Draft mode\r\n      email_template_id: null,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(API_URL, emailData, { headers });\r\n      if (response.status === 201) {\r\n        console.log(`✅ Email draft successfully created for: ${product.title}`);\r\n      \r\n        if (product.id) {\r\n          try {\r\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\r\n            await updateLastSent(product.id);\r\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\r\n          } catch (err) {\r\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\r\n          }\r\n        } else {\r\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\r\n        }\r\n      } else {\r\n        console.error(`❌ Failed to send email for ${product.title}:`, response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error sending email for ${product.title}:`, error);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Send Group Email & Update Last Sent for All Products\r\n */\r\nexport async function sendGroupEmail(selectedProducts) {\r\n  if (!selectedProducts || selectedProducts.length === 0) {\r\n    console.error(\"No products selected for group email.\");\r\n    return;\r\n  }\r\n\r\n  let combinedHTML = \"\";\r\n  for (const product of selectedProducts) {\r\n    if (!product || !product.title) {\r\n      console.error(\"Skipping invalid product in group:\", product);\r\n      continue;\r\n    }\r\n\r\n    let leadTime = product.lead_time || \"\";\r\n    if (leadTime.includes(\"Days\")) {\r\n      leadTime = leadTime.replace(\"Days\", \"Business Days\");\r\n    }\r\n\r\n    let price = product.price || \"0\";\r\n    try {\r\n      price = parseFloat(price).toFixed(2);\r\n    } catch {\r\n      // Leave as is\r\n    }\r\n\r\n    combinedHTML += buildPythonStyleEmail({\r\n      subject: product.title || \"\",\r\n      amazonUrl: product.amazon_url || \"\",\r\n      walmartUrl: product.walmart_url || \"\",\r\n      ebayUrl: product.ebay_url || \"\",\r\n      imageUrl: product.image_url || \"\",\r\n      price,\r\n      moq: product.moq || \"0\",\r\n      qty: product.qty || \"0\",\r\n      asin: product.asin || \"\",\r\n      fob: product.fob || \"\",\r\n      expDate: product.exp_date || \"\",\r\n      leadTime,\r\n    });\r\n\r\n    combinedHTML += \"<hr>\";\r\n  }\r\n\r\n  const emailData = {\r\n    subject: `Group Deal: ${selectedProducts.length} Products Available!`,\r\n    content: combinedHTML,\r\n    public: false,\r\n    email_template_id: null,\r\n  };\r\n\r\n  try {\r\n    const response = await axios.post(API_URL, emailData, { headers });\r\n    if (response.status === 201) {\r\n      console.log(\"✅ Group email draft successfully created.\");\r\n    \r\n      for (const product of selectedProducts) {\r\n        if (product && product.id) {\r\n          try {\r\n            console.log(`⏳ Updating last_sent for Product ID: ${product.id}`);\r\n            await updateLastSent(product.id);\r\n            console.log(`✅ last_sent successfully updated for: ${product.id}`);\r\n          } catch (err) {\r\n            console.error(`❌ Failed to update last_sent for ${product.id}:`, err);\r\n          }\r\n        } else {\r\n          console.error(`❌ Invalid product ID for last_sent update:`, product);\r\n        }\r\n      }\r\n    } else {\r\n      console.error(\"❌ Failed to send group email:\", response.data);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error sending group email:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Update Last Sent Timestamp in DB (Preserves Formatting)\r\n */\r\nasync function updateLastSent(productId) {\r\n  try {\r\n    await updateProduct(productId, { last_sent: new Date().toISOString() });\r\n    console.log(`last_sent updated for product: ${productId}`);\r\n  } catch (err) {\r\n    console.error(`Error updating last_sent for product ${productId}:`, err);\r\n  }\r\n}\r\n\r\n/**\r\n * ✅ Build the Email EXACTLY Like Python Code\r\n */\r\nfunction buildPythonStyleEmail({\r\n  subject,\r\n  amazonUrl,\r\n  walmartUrl,\r\n  ebayUrl,\r\n  imageUrl,\r\n  price,\r\n  moq,\r\n  qty,\r\n  asin,\r\n  fob,\r\n  expDate,\r\n  leadTime,\r\n}) {\r\n  let emailBody = `\r\n    <div style=\"text-align:center; padding:20px;\">\r\n        <h2 style=\"font-size:18px; margin-bottom:20px;\">${subject}</h2>\r\n        <img src=\"${imageUrl}\" alt=\"${subject}\" style=\"max-width:300px; max-height:300px; object-fit:contain; display:block; margin:auto; margin-top:40px; margin-bottom:40px;\"/>\r\n  `;\r\n\r\n  if (amazonUrl.includes(\"https\")) {\r\n    emailBody += `\r\n            <a href=\"${amazonUrl}\" style=\"background-color:#FF9900; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Amazon Link</a>\r\n    `;\r\n  }\r\n  if (walmartUrl.includes(\"https\")) {\r\n    emailBody += `\r\n            <a href=\"${walmartUrl}\" style=\"background-color:#0071CE; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">Walmart Link</a>\r\n    `;\r\n  }\r\n  if (ebayUrl.includes(\"https\")) {\r\n    emailBody += `\r\n            <a href=\"${ebayUrl}\" style=\"background-color:#E53238; color:white; padding:15px 25px; text-decoration:none; display:inline-block; font-size:16px; margin:5px; border-radius:5px;\">eBay Link</a>\r\n    `;\r\n  }\r\n\r\n  emailBody += `\r\n            <p style=\"font-size:18px; margin-top:40px;\">$${price} EA, MOQ ${moq}, ${qty} Available.</p>\r\n            <p style=\"font-size:18px;\">ASIN: ${asin}</p>\r\n  `;\r\n\r\n  if (fob) emailBody += `<p style=\"font-size:18px;\">FOB: ${fob}</p>`;\r\n  if (expDate) emailBody += `<p style=\"font-size:18px;\">Expiration Date: ${expDate}</p>`;\r\n\r\n  emailBody += `<p style=\"font-size:18px;\">Lead Time: ${leadTime}</p></div>`;\r\n\r\n  return emailBody;\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,OAAO,CAAC,CAAC;;AAEvC,MAAMC,OAAO,GAAG,mCAAmC;AACnD,MAAMC,OAAO,GAAG,sCAAsC;AAEtD,MAAMC,OAAO,GAAG;EACdC,MAAM,EAAE,kBAAkB;EAC1B,cAAc,EAAE,kBAAkB;EAClC,eAAe,EAAEF;AACnB,CAAC;;AAED;AACA;AACA;AACA,OAAO,eAAeG,oBAAoBA,CAACC,gBAAgB,EAAE;EAC3D,IAAI,CAACA,gBAAgB,IAAIA,gBAAgB,CAACC,MAAM,KAAK,CAAC,EAAE;IACtDC,OAAO,CAACC,KAAK,CAAC,4CAA4C,CAAC;IAC3D;EACF;EAEA,KAAK,MAAMC,OAAO,IAAIJ,gBAAgB,EAAE;IACtC,IAAI,CAACI,OAAO,IAAI,CAACA,OAAO,CAACC,KAAK,EAAE;MAC9BH,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEC,OAAO,CAAC;MACnD;IACF;;IAEA;IACA,IAAIE,QAAQ,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;IACtC,IAAID,QAAQ,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC7BF,QAAQ,GAAGA,QAAQ,CAACG,OAAO,CAAC,MAAM,EAAE,eAAe,CAAC;IACtD;;IAEA;IACA,IAAIC,KAAK,GAAGN,OAAO,CAACM,KAAK,IAAI,GAAG;IAChC,IAAI;MACFA,KAAK,GAAGC,UAAU,CAACD,KAAK,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,MAAM;MACN;IAAA;;IAGF;IACA,MAAMC,SAAS,GAAGC,qBAAqB,CAAC;MACtCC,OAAO,EAAEX,OAAO,CAACC,KAAK,IAAI,EAAE;MAC5BW,SAAS,EAAEZ,OAAO,CAACa,UAAU,IAAI,EAAE;MACnCC,UAAU,EAAEd,OAAO,CAACe,WAAW,IAAI,EAAE;MACrCC,OAAO,EAAEhB,OAAO,CAACiB,QAAQ,IAAI,EAAE;MAC/BC,QAAQ,EAAElB,OAAO,CAACmB,SAAS,IAAI,EAAE;MACjCb,KAAK;MACLc,GAAG,EAAEpB,OAAO,CAACoB,GAAG,IAAI,GAAG;MACvBC,GAAG,EAAErB,OAAO,CAACqB,GAAG,IAAI,GAAG;MACvBC,IAAI,EAAEtB,OAAO,CAACsB,IAAI,IAAI,EAAE;MACxBC,GAAG,EAAEvB,OAAO,CAACuB,GAAG,IAAI,EAAE;MACtBC,OAAO,EAAExB,OAAO,CAACyB,QAAQ,IAAI,EAAE;MAC/BvB;IACF,CAAC,CAAC;IAEF,MAAMwB,SAAS,GAAG;MAChBf,OAAO,EAAE,CAACX,OAAO,CAACC,KAAK,IAAI,EAAE,EAAE0B,IAAI,CAAC,CAAC;MACrCC,OAAO,EAAEnB,SAAS;MAClBoB,MAAM,EAAE,KAAK;MAAE;MACfC,iBAAiB,EAAE;IACrB,CAAC;IAED,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAM1C,KAAK,CAAC2C,IAAI,CAACzC,OAAO,EAAEmC,SAAS,EAAE;QAAEjC;MAAQ,CAAC,CAAC;MAClE,IAAIsC,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QAC3BnC,OAAO,CAACoC,GAAG,CAAC,2CAA2ClC,OAAO,CAACC,KAAK,EAAE,CAAC;QAEvE,IAAID,OAAO,CAACmC,EAAE,EAAE;UACd,IAAI;YACFrC,OAAO,CAACoC,GAAG,CAAC,wCAAwClC,OAAO,CAACmC,EAAE,EAAE,CAAC;YACjE,MAAMC,cAAc,CAACpC,OAAO,CAACmC,EAAE,CAAC;YAChCrC,OAAO,CAACoC,GAAG,CAAC,yCAAyClC,OAAO,CAACmC,EAAE,EAAE,CAAC;UACpE,CAAC,CAAC,OAAOE,GAAG,EAAE;YACZvC,OAAO,CAACC,KAAK,CAAC,oCAAoCC,OAAO,CAACmC,EAAE,GAAG,EAAEE,GAAG,CAAC;UACvE;QACF,CAAC,MAAM;UACLvC,OAAO,CAACC,KAAK,CAAC,4CAA4C,EAAEC,OAAO,CAAC;QACtE;MACF,CAAC,MAAM;QACLF,OAAO,CAACC,KAAK,CAAC,8BAA8BC,OAAO,CAACC,KAAK,GAAG,EAAE8B,QAAQ,CAACO,IAAI,CAAC;MAC9E;IACF,CAAC,CAAC,OAAOvC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,2BAA2BC,OAAO,CAACC,KAAK,GAAG,EAAEF,KAAK,CAAC;IACnE;EACF;AACF;;AAEA;AACA;AACA;AACA,OAAO,eAAewC,cAAcA,CAAC3C,gBAAgB,EAAE;EACrD,IAAI,CAACA,gBAAgB,IAAIA,gBAAgB,CAACC,MAAM,KAAK,CAAC,EAAE;IACtDC,OAAO,CAACC,KAAK,CAAC,uCAAuC,CAAC;IACtD;EACF;EAEA,IAAIyC,YAAY,GAAG,EAAE;EACrB,KAAK,MAAMxC,OAAO,IAAIJ,gBAAgB,EAAE;IACtC,IAAI,CAACI,OAAO,IAAI,CAACA,OAAO,CAACC,KAAK,EAAE;MAC9BH,OAAO,CAACC,KAAK,CAAC,oCAAoC,EAAEC,OAAO,CAAC;MAC5D;IACF;IAEA,IAAIE,QAAQ,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;IACtC,IAAID,QAAQ,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC7BF,QAAQ,GAAGA,QAAQ,CAACG,OAAO,CAAC,MAAM,EAAE,eAAe,CAAC;IACtD;IAEA,IAAIC,KAAK,GAAGN,OAAO,CAACM,KAAK,IAAI,GAAG;IAChC,IAAI;MACFA,KAAK,GAAGC,UAAU,CAACD,KAAK,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,MAAM;MACN;IAAA;IAGFgC,YAAY,IAAI9B,qBAAqB,CAAC;MACpCC,OAAO,EAAEX,OAAO,CAACC,KAAK,IAAI,EAAE;MAC5BW,SAAS,EAAEZ,OAAO,CAACa,UAAU,IAAI,EAAE;MACnCC,UAAU,EAAEd,OAAO,CAACe,WAAW,IAAI,EAAE;MACrCC,OAAO,EAAEhB,OAAO,CAACiB,QAAQ,IAAI,EAAE;MAC/BC,QAAQ,EAAElB,OAAO,CAACmB,SAAS,IAAI,EAAE;MACjCb,KAAK;MACLc,GAAG,EAAEpB,OAAO,CAACoB,GAAG,IAAI,GAAG;MACvBC,GAAG,EAAErB,OAAO,CAACqB,GAAG,IAAI,GAAG;MACvBC,IAAI,EAAEtB,OAAO,CAACsB,IAAI,IAAI,EAAE;MACxBC,GAAG,EAAEvB,OAAO,CAACuB,GAAG,IAAI,EAAE;MACtBC,OAAO,EAAExB,OAAO,CAACyB,QAAQ,IAAI,EAAE;MAC/BvB;IACF,CAAC,CAAC;IAEFsC,YAAY,IAAI,MAAM;EACxB;EAEA,MAAMd,SAAS,GAAG;IAChBf,OAAO,EAAE,eAAef,gBAAgB,CAACC,MAAM,sBAAsB;IACrE+B,OAAO,EAAEY,YAAY;IACrBX,MAAM,EAAE,KAAK;IACbC,iBAAiB,EAAE;EACrB,CAAC;EAED,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAM1C,KAAK,CAAC2C,IAAI,CAACzC,OAAO,EAAEmC,SAAS,EAAE;MAAEjC;IAAQ,CAAC,CAAC;IAClE,IAAIsC,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3BnC,OAAO,CAACoC,GAAG,CAAC,2CAA2C,CAAC;MAExD,KAAK,MAAMlC,OAAO,IAAIJ,gBAAgB,EAAE;QACtC,IAAII,OAAO,IAAIA,OAAO,CAACmC,EAAE,EAAE;UACzB,IAAI;YACFrC,OAAO,CAACoC,GAAG,CAAC,wCAAwClC,OAAO,CAACmC,EAAE,EAAE,CAAC;YACjE,MAAMC,cAAc,CAACpC,OAAO,CAACmC,EAAE,CAAC;YAChCrC,OAAO,CAACoC,GAAG,CAAC,yCAAyClC,OAAO,CAACmC,EAAE,EAAE,CAAC;UACpE,CAAC,CAAC,OAAOE,GAAG,EAAE;YACZvC,OAAO,CAACC,KAAK,CAAC,oCAAoCC,OAAO,CAACmC,EAAE,GAAG,EAAEE,GAAG,CAAC;UACvE;QACF,CAAC,MAAM;UACLvC,OAAO,CAACC,KAAK,CAAC,4CAA4C,EAAEC,OAAO,CAAC;QACtE;MACF;IACF,CAAC,MAAM;MACLF,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEgC,QAAQ,CAACO,IAAI,CAAC;IAC/D;EACF,CAAC,CAAC,OAAOvC,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;EACpD;AACF;;AAEA;AACA;AACA;AACA,eAAeqC,cAAcA,CAACK,SAAS,EAAE;EACvC,IAAI;IACF,MAAMnD,aAAa,CAACmD,SAAS,EAAE;MAAEC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IAAE,CAAC,CAAC;IACvE9C,OAAO,CAACoC,GAAG,CAAC,kCAAkCO,SAAS,EAAE,CAAC;EAC5D,CAAC,CAAC,OAAOJ,GAAG,EAAE;IACZvC,OAAO,CAACC,KAAK,CAAC,wCAAwC0C,SAAS,GAAG,EAAEJ,GAAG,CAAC;EAC1E;AACF;;AAEA;AACA;AACA;AACA,SAAS3B,qBAAqBA,CAAC;EAC7BC,OAAO;EACPC,SAAS;EACTE,UAAU;EACVE,OAAO;EACPE,QAAQ;EACRZ,KAAK;EACLc,GAAG;EACHC,GAAG;EACHC,IAAI;EACJC,GAAG;EACHC,OAAO;EACPtB;AACF,CAAC,EAAE;EACD,IAAIO,SAAS,GAAG;AAClB;AACA,0DAA0DE,OAAO;AACjE,oBAAoBO,QAAQ,UAAUP,OAAO;AAC7C,GAAG;EAED,IAAIC,SAAS,CAACR,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC/BK,SAAS,IAAI;AACjB,uBAAuBG,SAAS;AAChC,KAAK;EACH;EACA,IAAIE,UAAU,CAACV,QAAQ,CAAC,OAAO,CAAC,EAAE;IAChCK,SAAS,IAAI;AACjB,uBAAuBK,UAAU;AACjC,KAAK;EACH;EACA,IAAIE,OAAO,CAACZ,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC7BK,SAAS,IAAI;AACjB,uBAAuBO,OAAO;AAC9B,KAAK;EACH;EAEAP,SAAS,IAAI;AACf,2DAA2DH,KAAK,YAAYc,GAAG,KAAKC,GAAG;AACvF,+CAA+CC,IAAI;AACnD,GAAG;EAED,IAAIC,GAAG,EAAEd,SAAS,IAAI,mCAAmCc,GAAG,MAAM;EAClE,IAAIC,OAAO,EAAEf,SAAS,IAAI,+CAA+Ce,OAAO,MAAM;EAEtFf,SAAS,IAAI,yCAAyCP,QAAQ,YAAY;EAE1E,OAAOO,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}