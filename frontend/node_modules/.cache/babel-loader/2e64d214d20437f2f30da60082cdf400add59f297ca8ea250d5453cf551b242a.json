{"ast":null,"code":"const API_URL='http://104.131.49.141:8000';async function login(username,password){const response=await fetch(`${API_URL}/login`,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({'username':username,'password':password})});if(!response.ok){const errorText=await response.text();throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}async function fetchProducts(){const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}const response=await fetch(`${API_URL}/products`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(!response.ok){const errorText=await response.text();throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}async function createProduct(data){const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}console.log('Sending POST with data:',data);const response=await fetch(`${API_URL}/products`,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(data)});if(!response.ok){const errorText=await response.text();throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}async function updateProduct(id,data){console.log(`Preparing PATCH for ID: ${id} with data:`,data);const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}const response=await fetch(`${API_URL}/products/${id}`,{method:'PATCH',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(data)});console.log('PATCH Response status:',response.status);if(!response.ok){const errorText=await response.text();console.log('PATCH Response error:',response.status,errorText);throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}async function deleteProduct(id){const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}const response=await fetch(`${API_URL}/products/${id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(!response.ok){const errorText=await response.text();throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}async function markOutOfStock(id){const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}const response=await fetch(`${API_URL}/products/${id}/mark-out-of-stock`,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(!response.ok){const errorText=await response.text();throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}async function searchProducts(query){const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}const response=await fetch(`${API_URL}/products/search?query=${encodeURIComponent(query)}`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(!response.ok){const errorText=await response.text();throw new Error(`HTTP Error ${response.status}: ${errorText}`);}return response.json();}export{login,fetchProducts,createProduct,updateProduct,deleteProduct,markOutOfStock,searchProducts};","map":{"version":3,"names":["API_URL","login","username","password","response","fetch","method","headers","body","URLSearchParams","ok","errorText","text","Error","status","json","fetchProducts","token","localStorage","getItem","createProduct","data","console","log","JSON","stringify","updateProduct","id","deleteProduct","markOutOfStock","searchProducts","query","encodeURIComponent"],"sources":["/root/NPP_Deals/frontend/src/api.js"],"sourcesContent":["const API_URL = 'http://104.131.49.141:8000';\n\nasync function login(username, password) {\n  const response = await fetch(`${API_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: new URLSearchParams({\n      'username': username,\n      'password': password,\n    }),\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nasync function fetchProducts() {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  const response = await fetch(`${API_URL}/products`, {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nasync function createProduct(data) {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  console.log('Sending POST with data:', data);\n  const response = await fetch(`${API_URL}/products`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nasync function updateProduct(id, data) {\n  console.log(`Preparing PATCH for ID: ${id} with data:`, data);\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  const response = await fetch(`${API_URL}/products/${id}`, {\n    method: 'PATCH',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  });\n  console.log('PATCH Response status:', response.status);\n  if (!response.ok) {\n    const errorText = await response.text();\n    console.log('PATCH Response error:', response.status, errorText);\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nasync function deleteProduct(id) {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  const response = await fetch(`${API_URL}/products/${id}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nasync function markOutOfStock(id) {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  const response = await fetch(`${API_URL}/products/${id}/mark-out-of-stock`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nasync function searchProducts(query) {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  const response = await fetch(`${API_URL}/products/search?query=${encodeURIComponent(query)}`, {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`HTTP Error ${response.status}: ${errorText}`);\n  }\n  return response.json();\n}\n\nexport { login, fetchProducts, createProduct, updateProduct, deleteProduct, markOutOfStock, searchProducts };\n"],"mappings":"AAAA,KAAM,CAAAA,OAAO,CAAG,4BAA4B,CAE5C,cAAe,CAAAC,KAAKA,CAACC,QAAQ,CAAEC,QAAQ,CAAE,CACvC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,QAAQ,CAAE,CAC/CM,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,mCAClB,CAAC,CACDC,IAAI,CAAE,GAAI,CAAAC,eAAe,CAAC,CACxB,UAAU,CAAEP,QAAQ,CACpB,UAAU,CAAEC,QACd,CAAC,CACH,CAAC,CAAC,CACF,GAAI,CAACC,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,cAAe,CAAAC,aAAaA,CAAA,CAAG,CAC7B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAJ,KAAK,CAAC,gBAAgB,CAAC,CACnC,CACA,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,WAAW,CAAE,CAClDO,OAAO,CAAE,CACP,eAAe,CAAE,UAAUU,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACF,GAAI,CAACb,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,cAAe,CAAAK,aAAaA,CAACC,IAAI,CAAE,CACjC,KAAM,CAAAJ,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAJ,KAAK,CAAC,gBAAgB,CAAC,CACnC,CACAS,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEF,IAAI,CAAC,CAC5C,KAAM,CAAAjB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,WAAW,CAAE,CAClDM,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUU,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CAAC,CACDT,IAAI,CAAEgB,IAAI,CAACC,SAAS,CAACJ,IAAI,CAC3B,CAAC,CAAC,CACF,GAAI,CAACjB,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,cAAe,CAAAW,aAAaA,CAACC,EAAE,CAAEN,IAAI,CAAE,CACrCC,OAAO,CAACC,GAAG,CAAC,2BAA2BI,EAAE,aAAa,CAAEN,IAAI,CAAC,CAC7D,KAAM,CAAAJ,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAJ,KAAK,CAAC,gBAAgB,CAAC,CACnC,CACA,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,aAAa2B,EAAE,EAAE,CAAE,CACxDrB,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUU,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CAAC,CACDT,IAAI,CAAEgB,IAAI,CAACC,SAAS,CAACJ,IAAI,CAC3B,CAAC,CAAC,CACFC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEnB,QAAQ,CAACU,MAAM,CAAC,CACtD,GAAI,CAACV,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvCU,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEnB,QAAQ,CAACU,MAAM,CAAEH,SAAS,CAAC,CAChE,KAAM,IAAI,CAAAE,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,cAAe,CAAAa,aAAaA,CAACD,EAAE,CAAE,CAC/B,KAAM,CAAAV,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAJ,KAAK,CAAC,gBAAgB,CAAC,CACnC,CACA,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,aAAa2B,EAAE,EAAE,CAAE,CACxDrB,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUU,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACF,GAAI,CAACb,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,cAAe,CAAAc,cAAcA,CAACF,EAAE,CAAE,CAChC,KAAM,CAAAV,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAJ,KAAK,CAAC,gBAAgB,CAAC,CACnC,CACA,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,aAAa2B,EAAE,oBAAoB,CAAE,CAC1ErB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUU,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACF,GAAI,CAACb,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,cAAe,CAAAe,cAAcA,CAACC,KAAK,CAAE,CACnC,KAAM,CAAAd,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAJ,KAAK,CAAC,gBAAgB,CAAC,CACnC,CACA,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,0BAA0BgC,kBAAkB,CAACD,KAAK,CAAC,EAAE,CAAE,CAC5FxB,OAAO,CAAE,CACP,eAAe,CAAE,UAAUU,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACF,GAAI,CAACb,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAcT,QAAQ,CAACU,MAAM,KAAKH,SAAS,EAAE,CAAC,CAChE,CACA,MAAO,CAAAP,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAEA,OAASd,KAAK,CAAEe,aAAa,CAAEI,aAAa,CAAEM,aAAa,CAAEE,aAAa,CAAEC,cAAc,CAAEC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}